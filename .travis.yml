language: python
os:
  - linux
  - osx

python:
  - "3.4"
  - "3.5"
  - nightly

matrix:
  allow_failures:
    - python: nightly

install:
  - pip install -r requirements.txt
  - pip install pytest
  - git clone https://github.com/pyinstaller/pyinstaller
  - cd pyinstaller && sudo python setup.py install && cd ..

script:
  - pyinstaller --name=makestack --onefile makestack/__main__.py

deploy:
  provider: releases
  api_key:
    secure:
  file: "disk/makestack-$TRAVIS_OS_NAME"
  skip_cleanup: true
  on:
    tags: true
